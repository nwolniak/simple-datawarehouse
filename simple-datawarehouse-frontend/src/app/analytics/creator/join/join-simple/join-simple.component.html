<div class="wrapper">
  <p-table
    (onRowReorder)="updateQuery()"
    [value]="query.joinList">
    <ng-template pTemplate="header">
      <tr>
        <th style="width:3rem"></th>
        <th>Select Table</th>
        <th>Actions</th>
      </tr>
    </ng-template>
    <ng-template let-column let-index="rowIndex" pTemplate="body">
      <tr [pReorderableRow]="index">
        <td>
          <span class="pi pi-bars" pReorderableRowHandle></span>
        </td>
        <td>
          <p-dropdown
            (onChange)="joinedTableChange($event.value, index)"
            [(ngModel)]="query.joinList[index].tableName"
            [options]="joinTableOptions(index)"
            appendTo="body"
            placeholder="Join Table">
          </p-dropdown>
        </td>
        <td>
          <button (click)="deleteJoinTable(index)">Delete</button>
        </td>
      </tr>
    </ng-template>
  </p-table>
  <button (click)="newJoinTable()" [disabled]="buttonDisabled()" class="add-button">+</button>
</div>
